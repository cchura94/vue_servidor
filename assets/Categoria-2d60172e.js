import{c}from"./CategoriaService-cdabcc48.js";import{u as h,r as d,b as B,d as n,o as E,c as N,a as v,t as g,e as O,f as a,w as m,F as $}from"./index-b162bc2b.js";const S={class:"card"},I=v("label",{for:""},"Nombre Categoria",-1),U=v("label",{for:""},"Detalle",-1),M={__name:"Categoria",setup(F){const f=h(),b={nombre:"",detalle:""},C=d("Gesti贸n Categorias"),p=d([]),r=d(!1),o=d(b);B(()=>{console.log("Cargando Onmounted..."),s()});const s=async()=>{const{data:l}=await c.listar();p.value=l},_=async()=>{if(o.value.id>0)try{await c.modificar(o.value,o.value.id),r.value=!1,s()}catch(l){console.log(l),alert("Ocurri贸 un problema al modificar la categoria")}else try{await c.guardar(o.value),r.value=!1,s()}catch(l){console.log(l),alert("Ocurri贸 un problema al registrar la categoria")}},y=l=>{o.value=l,r.value=!0},w=async l=>{if(o.value=l,confirm("Esta seguro de eliminar la categoria?"))try{await c.eliminar(o.value.id),r.value=!1,s()}catch(e){console.log(e),alert("Ocurri贸 un problema al eliminar la categoria")}};return(l,e)=>{const i=n("Button"),u=n("Column"),k=n("DataTable"),x=n("InputText"),D=n("Textarea"),V=n("Dialog");return E(),N($,null,[v("div",S,[v("h1",null,g(C.value)+" "+g(O(f).contador),1),a(i,{label:"Nueva Categoria",icon:"pi pi-new",onClick:e[0]||(e[0]=t=>r.value=!0)}),a(k,{value:p.value,tableStyle:"min-width: 50rem"},{default:m(()=>[a(u,{field:"id",header:"ID"}),a(u,{field:"nombre",header:"NOMBRE"}),a(u,{field:"detalle",header:"DETALLE"}),a(u,{header:"action"},{body:m(t=>[a(i,{icon:"pi pi-pencil",severity:"warning",onClick:T=>y(t.data)},null,8,["onClick"]),a(i,{icon:"pi pi-trash",severity:"danger",onClick:T=>w(t.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value"])]),a(V,{visible:r.value,"onUpdate:visible":e[5]||(e[5]=t=>r.value=t),modal:"",header:"Categoria",style:{width:"50vw"},class:"p-fluid"},{footer:m(()=>[a(i,{label:"Cerrar",icon:"pi pi-times",onClick:e[3]||(e[3]=t=>r.value=!1),text:""}),a(i,{label:"Guardar",icon:"pi pi-check",onClick:e[4]||(e[4]=t=>_()),autofocus:""})]),default:m(()=>[I,a(x,{type:"text",modelValue:o.value.nombre,"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.nombre=t)},null,8,["modelValue"]),U,a(D,{modelValue:o.value.detalle,"onUpdate:modelValue":e[2]||(e[2]=t=>o.value.detalle=t),rows:"5",cols:"30"},null,8,["modelValue"])]),_:1},8,["visible"])],64)}}};export{M as default};
